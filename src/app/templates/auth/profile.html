{% extends "base.html" %}

{% block title %}Mi Perfil - Sistema de Aranceles{% endblock %}

{% block styles %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Cabecera del perfil con nuevo diseño -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden mb-8 transform transition-all duration-300 hover:shadow-xl">
        <div class="profile-header p-8 relative">
            <div class="relative z-10 text-center">
                <h2 class="text-3xl font-bold text-white mb-2 tracking-tight">Mi Perfil</h2>
                <p class="text-blue-100 text-sm">Gestiona tu información personal y preferencias</p>
            </div>
        </div>
        
        <div class="p-6">
            <!-- Información básica con avatar -->
            <div class="flex flex-col md:flex-row items-center md:items-start gap-6 pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="profile-avatar bg-gradient-to-br from-blue-500 to-blue-700 rounded-full p-4 text-white flex items-center justify-center h-24 w-24 shadow-lg">
                    <i class="fas fa-user text-4xl"></i>
                </div>
                
                <div class="flex-1 text-center md:text-left">
                    <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-1">{{ current_user.username }}</h3>
                    <p class="text-gray-600 dark:text-gray-400 flex items-center justify-center md:justify-start mb-4">
                        <i class="fas fa-envelope mr-2 text-blue-500"></i>{{ current_user.email }}
                    </p>
                    
                    {% if current_user.is_free %}
                    <span class="badge inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border border-gray-200 dark:border-gray-600">
                        <i class="fas fa-user mr-2"></i>Usuario Free
                    </span>
                    {% elif current_user.is_vip %}
                    <span class="badge inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-yellow-300 to-yellow-500 text-yellow-900 border border-yellow-400">
                        <i class="fas fa-crown mr-2"></i>Usuario VIP
                    </span>
                    {% elif current_user.is_admin %}
                    <span class="badge inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-gradient-to-r from-red-500 to-pink-500 text-white border border-red-400">
                        <i class="fas fa-shield-alt mr-2"></i>Administrador
                    </span>
                    {% endif %}
                </div>
                
                <div class="flex flex-col items-center md:items-end space-y-2">
                    <div class="text-sm text-gray-500 dark:text-gray-400">
                        <i class="fas fa-calendar-alt mr-1"></i> Miembro desde
                    </div>
                    <div class="font-semibold text-gray-800 dark:text-gray-200">
                        {{ current_user.created_at.strftime('%d %b, %Y') }}
                    </div>
                </div>
            </div>
            
            <!-- Tarjetas de información -->
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="info-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                        <h4 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-info-circle mr-2 text-blue-500"></i>Información de cuenta
                        </h4>
                    </div>
                    
                    <div class="p-6">
                        <ul class="space-y-4">
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Estado:</span>
                                <span class="stat-value px-2 py-1 rounded-md bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 flex items-center">
                                    <i class="fas fa-check-circle mr-1"></i> Activo
                                </span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Último acceso:</span>
                                <span class="stat-value text-gray-800 dark:text-gray-200">
                                    {{ current_user.last_login.strftime('%d/%m/%Y %H:%M') }}
                                </span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Rol:</span>
                                <span class="stat-value text-gray-800 dark:text-gray-200">
                                    {% if current_user.is_admin %}
                                        Administrador
                                    {% elif current_user.is_vip %}
                                        VIP
                                    {% else %}
                                        Estándar
                                    {% endif %}
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="info-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                        <h4 class="text-lg font-semibold text-gray-800 dark:text-white flex items-center">
                            <i class="fas fa-clock mr-2 text-blue-500"></i>Detalles de sesión
                        </h4>
                    </div>
                    
                    <div class="p-6">
                        {% if current_user.is_free %}
                        <div class="bg-blue-50 dark:bg-blue-900/50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-md">
                            <div class="flex items-start">
                                <div class="flex-shrink-0 pt-0.5">
                                    <i class="fas fa-hourglass-half text-blue-600 dark:text-blue-300"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm text-blue-700 dark:text-blue-200">
                                        Tu sesión expirará en <strong class="font-bold">{{ current_user.session_remaining_time }}</strong> minutos.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-6">
                            <a href="#" class="inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-yellow-400 to-yellow-600 hover:from-yellow-500 hover:to-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 profile-action-btn">
                                <i class="fas fa-crown mr-2"></i>Actualizar a VIP
                            </a>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">Obtén acceso ilimitado a todas las funciones</p>
                        </div>
                        {% else %}
                        <ul class="space-y-4">
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Tipo de sesión:</span>
                                <span class="stat-value px-2 py-1 rounded-md bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 flex items-center">
                                    <i class="fas fa-infinity mr-1"></i> Ilimitada
                                </span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Acceso a funciones:</span>
                                <span class="stat-value px-2 py-1 rounded-md bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 flex items-center">
                                    <i class="fas fa-check mr-1"></i> Completo
                                </span>
                            </li>
                            <li class="flex justify-between items-center">
                                <span class="text-gray-600 dark:text-gray-400">Beneficios:</span>
                                <span class="stat-value text-gray-800 dark:text-gray-200">Premium</span>
                            </li>
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Botones de acciones con mejor estilo -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
        <a href="{{ url_for('main.index') }}" class="profile-action-btn inline-flex items-center justify-center px-6 py-3 border border-gray-300 dark:border-gray-600 shadow-sm text-base font-medium rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            <i class="fas fa-arrow-left mr-2"></i>Volver al inicio
        </a>
        <a href="{{ url_for('auth.logout') }}" class="profile-action-btn inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
            <i class="fas fa-sign-out-alt mr-2"></i>Cerrar sesión
        </a>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock %}
